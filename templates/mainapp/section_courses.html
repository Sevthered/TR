{% extends 'base.html' %}
{% load static %}

{% block page_title %}Cursos - {{ section_label }}{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/global-styles.css' %}">
{% endblock %}

{% block content %}
  <div class="page-root">
    <div class="page-surface" role="main">
      <header class="page-header">
        <h1>Cursos - {{ section_label }}</h1>
        {% if user.is_authenticated and user.profile.role == 'professor' %}
          <a class="btn btn-secondary" href="javascript:history.back()">Volver</a>
        {% endif %}
      </header>
      
      <div class="filter-section mb-4">
        {% if school_years %}
            <form method="GET" id="school-year-filter-form">
                <label for="school-year-select" style="font-weight: bold;">Seleccionar A침o Escolar:</label>
                <select name="school_year_id" id="school-year-select" class="form-control" onchange="document.getElementById('school-year-filter-form').submit();">
                    {% for sy in school_years %}
                        <option value="{{ sy.pk }}" {% if sy.pk == selected_year_id %}selected{% endif %}>
                            {{ sy.year }}
                        </option>
                    {% endfor %}
                </select>
            </form>
        {% endif %}
      </div>
      {% if courses %}
        <div class="table-wrap">
          <table class="table course-table">
          <thead><tr><th>Secci칩n</th></tr></thead>
          <tbody>
            {% for course in courses %}
            <tr>
              <td>
                <a href="{% url 'class_dashboard' course.CourseID %}?school_year_id={{ selected_year_id }}">
                    {{ course.Section }}
                </a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
          </table>
        </div>
      {% else %}
        <div class="empty">No hay cursos en esta secci칩n para el a침o seleccionado.</div>
      {% endif %}
    </div>
  </div>
{% endblock %}