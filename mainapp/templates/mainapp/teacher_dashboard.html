{% extends "base.html" %}
{% load static %}

{% block page_title %}
Teacher Dashboard
{% endblock page_title %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/global-styles.css' %}">
{% endblock styles %}

{% block content %}
<div class="page-root">
  <div class="page-surface page-content" role="main" aria-labelledby="page-title">
  
    <h1 id="page-title" class="page-title">Listado de Cursos por Tipo</h1>

    <!-- Filtro de Año Escolar -->
    <div class="filter-section" style="margin-bottom: 2rem;">
      <form method="get" class="filter-form" style="display: flex; gap: 1rem; align-items: center;">
        <label for="school-year-select" style="font-weight: 600;">Año Escolar:</label>
        <select 
          id="school-year-select" 
          name="school_year" 
          onchange="this.form.submit()"
          style="padding: 0.5rem; border-radius: 4px; border: 1px solid #ccc;">
          {% for sy in school_years %}
            <option value="{{ sy.SchoolYearID }}" {% if sy.SchoolYearID == selected_school_year.SchoolYearID %}selected{% endif %}>
              {{ sy.year }}
            </option>
          {% empty %}
            <option value="">No hay años escolares disponibles</option>
          {% endfor %}
        </select>
      </form>
    </div>

    <div class="container grid grid-3">
      <div class="column">
        <h2>ESO</h2>
        <div class="table-wrap" role="region" aria-label="Cursos ESO">
          <table class="course-table" aria-describedby="eso-note">
            <thead>
              <tr><th>Sección</th></tr>
            </thead>
            <tbody>
              {% for course in eso_courses %}
              <tr>
                <td><a href="{% url 'class_dashboard' course.CourseID %}">{{ course.Section }}</a></td>
              </tr>
              {% empty %}
              <tr><td colspan="1" id="eso-note">No hay cursos de ESO.</td></tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

      <div class="column">
        <h2>Bachillerato</h2>
        <div class="table-wrap" role="region" aria-label="Cursos Bachillerato">
          <table class="course-table" aria-describedby="bach-note">
            <thead>
              <tr><th>Sección</th></tr>
            </thead>
            <tbody>
              {% for course in bachillerato_courses %}
              <tr>
                <td><a href="{% url 'class_dashboard' course.CourseID %}">{{ course.Section }}</a></td>
              </tr>
              {% empty %}
              <tr><td colspan="1" id="bach-note">No hay cursos de Bachillerato.</td></tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

      <div class="column">
        <h2>IB</h2>
        <div class="table-wrap" role="region" aria-label="Cursos IB">
          <table class="course-table" aria-describedby="ib-note">
            <thead>
              <tr><th>Sección</th></tr>
            </thead>
            <tbody>
              {% for course in ib_courses %}
              <tr>
                <td><a href="{% url 'class_dashboard' course.CourseID %}">{{ course.Section }}</a></td>
              </tr>
              {% empty %}
              <tr><td colspan="1" id="ib-note">No hay cursos IB.</td></tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}